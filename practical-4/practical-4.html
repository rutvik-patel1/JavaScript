<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practical 4</title>
    <link rel="stylesheet" href="style.css">
</head>
<body onload="setDate()">
    <!--title(Mr/Ms/Mrs.), firstName, middleName, lastName, gender, emailID,
contactNo, for permanent address: consider the fields like,
houseNo/blockNo/houseName, addressLine1, addressLine2, landmark, city,
state, country, pincode, designation, technologiesKnown and experience in
particular technology in number of years, careerStartDate and save button.-->
<div class="heading">
     <h1>Registration Form</h1>
</div>

<form onsubmit="return getData(this);" id="myForm">
   
   <table style="border-collapse: collapse;" id="form-table">
       <tr>
           <td><label for="title">Title:</label></td>
           <td><select name="title" id="title"  required>
            <option value="Mr">Mr</option>
            <option value="Ms">Ms</option>
            <option value="Mrs">Mrs</option>
          </select></td>
       </tr>
       <tr>
        <td><label for="name">Name:</label></td>
        <td><div class="input-group">
            
            <input type="text" name="firstName" value="Rutvik" id="firstName" placeholder="Firstname" required>
            <input type="text" name="middleName"  value="V" id="middleName" placeholder="Middlename">
            <input type="text" name="lastName" value="Patel" id="lastName" placeholder="lastName" required>
        </div>
        <p id="error"></p>
        </td>
    </tr>
    <tr>
        <td><p>Gender:</p></td>
        <td> <div class="radio-group">
            <input type="radio" name="gender" value="male" id="male" required>
            <label for="male" selected>Male</label>
            <input type="radio" name="gender" value="female" id="female" required>
            <label for="female">Female</label><br>
        </div></td>
    </tr>
    <tr>
        <td><label for="email">Email ID:</label></td>
        <td><input type="email" value="rutvik@gmail.com" name="email" id="email" required></td>
    </tr>
    <tr>
        <td><label for="contactNo"> Contact No:</label></td>
        <td><input type="tel" value="9099072492" name="contactNo" title="10 digit mobile no" id="contactNo" pattern="[1-9]{1}[0-9]{9}" maxlength="10" required></td>
    </tr>
    <tr>
        <td><label for="houseNo">House No.:</label></td>
        <td><input type="text" name="houseNo" id="houseNo" required><br></td>
    </tr>
    <tr>
        <td><label for="addressLine1"> Address Line 1:</label>
           </td>
        <td> <textarea type="tel" name="addressLine1" id="addressLine1" rows="1" cols="30" required></textarea></td>
    </tr>
    <tr>
        <td><label for="addressLine2"> Address Line 2:</label></td>
        <td><textarea type="tel" name="addressLine2" id="addressLine2" rows="1" cols="30"></textarea><br>
        </td>
    </tr>
    <tr>
        <td><label for="landmark">Landmark:</label></td>
        <td><input type="text" name="landmark" id="landmark" required></td>
    </tr>

    <tr>
        <td><label for="city">City:</label>
            </td>
        <td><input type="text" name="city" id="city" required></td>
    </tr>

    <tr>
        <td><label for="state">State:</label>
            </td>
        <td><select name="state" id="state"  required></select></td>
    </tr>

    <tr>
        <td><label for="country">Country:</label>
            </td>
        <td><select name="country" id="country" required>
            <option value="India">India</option>
        </select></td>
    </tr>

    <tr>
        <td><label for="pincode">Pincode:</label>
            </td>
        <td><input type="text" name="pincode" id="pincode" required></td>
    </tr>

    <tr>
        <td><label for="designation">Designation:</label>
            </td>
        <td><input type="text" name="designation" id="designation" required></td>
    </tr>
    <tr>
        <td><label for="tech">TechnologiesKnown:</label>
            </td>
        <td><input type="text" name="tech" id="tech" required></td>
    </tr> 
    <tr>
        <td><label for="startdate" >start Date:</label>
            </td>
        <td><input type="date" name="startDate" id="startDate" required></td>
    </tr>
    <tr>
        <td>TechnologiesKnown</td>
        <td><input type="checkbox" id="vue"  name="techcheckbox" value="vue">
            <label for="vue">Vue</label>
            <input type="number" name="vue" step="0.1" value="0" id="expvue">Yr<br>
            <input type="checkbox" id="react" name="techcheckbox" value="react">
            <label for="react">React</label>
            <input type="number" name="react"  step="0.1" value="0" id="expreact">Yr<br>
            <input type="checkbox" id="angular" name="techcheckbox" value="angular">
            <label for="angular">Angular</label>
            <input type="number" name="vue" value="0" step="0.1" id="expangular">Yr<br>
            
        </td>
    </tr>
     <tr>
        <td colspan="2"><button type="submit">Submit Data</button></td>
       
    </tr>
    
   </table>
  <!-- <div class="form-container">
  <label for="title">Title:</label>
  <select name="title" id="title"  required>
    <option value="Mr">Mr</option>
    <option value="Ms">Ms</option>
    <option value="Mrs">Mrs</option>
  </select><br>
        <label for="name">Name:</label><br>
        <div class="input-group">
            
            <input type="text" name="firstName" value="Rutvik" id="firstName" placeholder="Firstname" required>
            <input type="text" name="middleName"  value="V" id="middleName" placeholder="Middlename">
            <input type="text" name="lastName" value="Patel" id="lastName" placeholder="lastName" required>
        </div>
        <p>Gender:</p>
        <div class="radio-group">
            <input type="radio" name="gender" value="male" id="male" required>
            <label for="male" selected>Male</label>
            <input type="radio" name="gender" value="female" id="female" required>
            <label for="female">Female</label><br>
        </div>
        <br>
        <label for="email">Email ID:</label>
        <input type="email" value="rutvik@gmail.com" name="email" id="email" required>
        <br>
        <label for="contactNo"> Contact No:</label>
        <input type="tel" value="9099072492" name="contactNo" title="10 digit mobile no" id="contactNo" pattern="[1-9]{1}[0-9]{9}" maxlength="10" required>
        <p>Permanent Address:-</p>
        <div class="address">
            <label for="houseNo">House No.:</label>
            <input type="text" name="houseNo" id="houseNo" required><br>
            <label for="addressLine1"> Address Line 1:</label>
            <textarea type="tel" name="addressLine1" id="addressLine1" rows="1" cols="30" required></textarea>
            <label for="addressLine2"> Address Line 2:</label>
            <textarea type="tel" name="addressLine2" id="addressLine2" rows="1" cols="30"></textarea><br>
            <label for="landmark">Landmark:</label>
            <input type="text" name="landmark" id="landmark" required>
            <label for="city">City:</label>
            <input type="text" name="city" id="city" required><br>
            <label for="state">State:</label>
            <select name="state" id="state"  required></select>
            <label for="country">Country:</label>
            <select name="country" id="country" required>
                <option value="India">India</option>
            </select>
            <label for="pincode">Pincode:</label>
            <input type="text" name="pincode" id="pincode" required>
        </div>
        <label for="designation">Designation:</label>
        <input type="text" name="designation" id="designation" required>
        <label for="tech">TechnologiesKnown:</label>
        <input type="text" name="tech" id="tech" required>
         <label for="designation">Experience in Yr</label>
        <input type="experience" name="experience" id="experience" required><br> 
        <label for="startdate" >start Date:</label>
        <input type="date" name="startDate" id="startDate" required> <br>
        <button type="submit">Submit Data</button>
    </div> -->
</form>

<table class="deatils" id="dataTable2">
    <tr>
        <th rowspan="2">ID</th>
        <th rowspan="2">Fullname</th>
        <th rowspan="2">Gender</th>
        <th colspan="3">Contact Details</th>
        <th rowspan="2">Designation</th>
        <th rowspan="2">Technology</th>
        <th rowspan="2">Total Experience</th>
        <th rowspan="2">Delete</th>
    </tr>
    <tr>
        <th>EmailId</th>
        <th>Contact Details</th>
        <th>Address</th>
    </tr>
    <tbody id="dataTable">
        
    </tbody>
    
  
</table>

</body>

<script>
function setDate(){
	    var today = new Date().toISOString().split('T')[0];
      document.getElementsByName("startDate")[0].setAttribute('max',today)
	}

var states = new Array("Andaman and Nicobar Islands", "Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chandigarh", "Chhattisgarh", "Dadra and Nagar Haveli", "Daman and Diu", "Delhi", "Goa", "Gujarat", "Haryana", "Himachal Pradesh", "Jammu and Kashmir", "Jharkhand", "Karnataka", "Kerala", "Lakshadweep", "Madhya Pradesh", "Maharashtra", "Manipur", "Meghalaya", "Mizoram", "Nagaland", "Orissa", "Pondicherry", "Punjab", "Rajasthan", "Sikkim", "Tamil Nadu", "Tripura", "Uttaranchal", "Uttar Pradesh", "West Bengal");
select = document.getElementById('state');
for (var i = 0; i<=states.length; i++){
    var opt = document.createElement('option');
    opt.value = states[i];
    opt.innerHTML = states[i];
    select.appendChild(opt);
}

//handle form data

var form = document.getElementById("myForm");
function handleForm(event) { event.preventDefault(); } 
form.addEventListener('submit', handleForm);


function getData(form){
    var title = document.getElementById("title").value;
    var name = document.getElementById("firstName").value;
    var middleName = document.getElementById("middleName").value;
    var lastName = document.getElementById("lastName").value;
    var genderEle = document.getElementsByName("gender");
    var fullname = title+""+name+""+middleName+""+lastName
    var error = result(fullname)
    if(error){ 
        console.log("not working")
        document.getElementById("error").innerHTML= error

        return false
    }
    else{

    }
    console.log(error)
    for(i = 0; i < genderEle.length; i++) {
                if(genderEle[i].checked)
                {var gender = genderEle[i].value}
            }
    
    var email = document.getElementById("email").value;
    var contactNo = document.getElementById("contactNo").value;
    var houseNo = document.getElementById("houseNo").value;
    var addressLine1 = document.getElementById("addressLine1").value;
    var addressLine2 = document.getElementById("addressLine2").value;
    var city = document.getElementById("city").value;
    var landmark = document.getElementById("landmark").value;
    //var statesEle = document.getElementsByName("state");
 


var select2 = document.getElementById('state');
var value = select2.options[select2.selectedIndex].value;
 // en

    var countryEle = document.getElementsByName("country");
    var country = countryEle[0].value
    var pincode = document.getElementById("pincode").value;
    var address = houseNo+", "+addressLine1+", "+addressLine2+", "+landmark+","+city+","+value+", "+country+" ,"+pincode;
    
    var designation = document.getElementById("designation").value;
    var tech = document.getElementById("tech").value;
    var date = document.getElementById("startDate").value;
    //console.log(date)

    var ch1 = document.getElementById("react")
    var ch2 = document.getElementById("vue")
    var ch3 = document.getElementById("angular")
    var techlist = []
    if(ch1.checked){
        var react = document.getElementById("expreact").value
        techlist.push('React:'+react+'yr')
    }
    if(ch2.checked){
        var vue = document.getElementById("expvue").value
        techlist.push('Vue:'+vue+'yr')
    }
    if(ch3.checked){
        var angular = document.getElementById("expangular").value
        techlist.push('Angular:'+angular)
    }
      
    //console.log(title,name,middleName, lastName,email,contactNo,houseNo,addressLine1,addressLine2,city,states,pincode, designation, designation)
    //console.log(gender)
   //console.log(designation)
//    console.log(tech)
//    console.log(states)
  addRow(fullname,gender,email,contactNo,address,designation,techlist,date)
  
  
    return true;
}

var id = 1 //global data id
function addRow(fullname,gender,email,contactNo,address,designation,tech,date){
  
  
//   console.log(id)
//   console.log(date)
  var exp = getExp(date)
  var ele = "<tr id="+id+"><td>"+id+"</td><td>"+fullname+"</td><td>"+gender+"</td><td>"+email+"</td><td>"+contactNo+"</td><td>"+address+"</td><td>"+designation+"</td><td>"+tech+"</td><td>"+exp+"</td><td><button onclick='deleteData(this.id)' id="+id+">X</button></td></tr>"
 // console.log(ele) 
//   var ele2 = document.createElement("tr")
  document.getElementById("dataTable").insertAdjacentHTML( 'beforeend', ele );
    id++
}

function getExp(date) {
    var today = new Date();
    var sd = new Date(date);
    var yr = today.getFullYear() - sd.getFullYear();
    var m = today.getMonth() - sd.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < sd.getDate())) {
        yr--;
        m=m*(-1)
        m=12-m
        console.log('month',m)
    }
    if(yr==0){
    if(m<=1){return 0.1} 
    else if(m>1&&m<10){
      return m*(0.1)
    }
    else
    {return 1}
    }
    x = yr+m*(0.1)
    return x;
}
function deleteData(uid){
    console.log(uid)
    console.log('clicked')  
    document.getElementById(uid).remove(); 
}





function result(str){

    let newStr = str.replace(/^\s+|\s+$/g, "").replace(/\s+/g, " ");
    let condition = new RegExp("^[a-zA-Z ]*[']{0,1}[a-zA-Z ]*$");
    if(str.match(/\d+/g) != null){
        return "Name contains number !!!"
    }
    else if(newStr != str){
        return "Name contains whitespace characters !!"
    }
    else if(!condition.test(str)){
        return "Apostrophes occururing multiple times !!"
    }
    return false;
}

    
</script>
</html>